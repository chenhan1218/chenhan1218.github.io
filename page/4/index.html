<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta property="og:title" content="Chen-Han (Stanley) Hsiao">
    
    <meta property="og:type" content="website">
    
    <meta property="og:description" content="">
    <meta property="og:url" content="https://swem.github.io/">
    <meta property="og:site_name" content="Chen-Han (Stanley) Hsiao">
    
    <meta name="generator" content="Hugo 0.22.1" />
    <title>Chen-Han (Stanley) Hsiao &middot; Chen-Han (Stanley) Hsiao</title>
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="https://swem.github.io/css/style.css">
    
    <link href="https://swem.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Chen-Han (Stanley) Hsiao" />
    
    
    <link rel="icon" href="https://swem.github.io/favicon.ico" />
    

    
    
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top visible-xs">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
				<a class="navbar-brand" href="https://swem.github.io/">Chen-Han (Stanley) Hsiao</a>
			
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				
				
					<li><a href="https://swem.github.io/about">About</a></li>
				
					<li><a href="https://swem.github.io/post">Post</a></li>
				
			</ul>
		</div>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div id="menu" class="hidden-xs col-sm-4 col-md-3">
	<div id="menu-content" class="vertical-align">
		
			<h1 class="text-center"><a href="https://swem.github.io/">Chen-Han (Stanley) Hsiao</a></h1>
		
		
		
			<small class="text-center center-block">Tech Blog</small>
		
		
		
			<img id="profile-pic" src="https://swem.github.io//img/profile.png" alt="My Picture" class="img-circle center-block">
		
		<div id="social" class="text-center">
			
				<a href="https://github.com/swem"><i class="fa fa-github fa-2x"></i></a>
			
				<a href="https://www.linkedin.com/in/chen-han-hsiao-2b486049"><i class="fa fa-linkedin fa-2x"></i></a>
			
				<a href="https://plus.google.com/u/0/115154486338673377998"><i class="fa fa-google-plus fa-2x"></i></a>
			

			
		</div>
		<div id="links" class="text-center">
			
			
				<a href="https://swem.github.io/about">About</a>
			
				<a href="https://swem.github.io/post">Post</a>
			
		</div>
	</div>
</div>

		<div id="content" class="col-xs-12 col-sm-8 col-md-9">
			<div class="row">
				<div id="post" class="col-sm-offset-1 col-sm-10 col-md-10 col-lg-8">

<header>
	
	
		<h1> </h1>
	
</header>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-10-28-archlinux-start-on-avahi-daemon/">在 Archlinux 上啟動Avahi-daemon</a>
			<br>
			<small>
				2014-10-28
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>這篇回覆介紹了如何在 Archlinux 上使用 systemd 來開啟 avahi-daemon，使得區域網路內的電腦可以用 .local 來連線到其它電腦。</p>

<ol>
<li><code>pacman -S avahi nss-mdns</code> Installs the Avahi services daemon and the Multicast DNS resolver.
nano /etc/nsswitch.conf This file tells the C library how to obtain name-service information.</li>
<li>Change the line <code>hosts: files dns myhostname</code> to <code>hosts: files mdns_minimal [NOTFOUND=return] dns myhostname</code>, save and exit.</li>
<li><code>systemctl start avahi-daemon</code> Starts the Avahi service manually since we&rsquo;re already booted.look for errors)</li>
<li><code>systemctl enable avahi-daemon</code> Enables the Avahi service on boot.</li>
</ol>

<p><a href="http://unix.stackexchange.com/a/146025/89399">How do I get to use .local hostnames with Arch Linux?</a></p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-09-23-obtained-with-python-fcntl-file-lock/">用python fcntl 取得 file lock</a>
			<br>
			<small>
				2014-09-23
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>在 Stack Overflow 上看到的問答。稍微修改了一下為可執行的版本，下面的Python程式碼可以對一個檔案做lock。同時執行2個這樣的 python script，先取得 file lock 的 process 可以順利印出 &ldquo;No error&rdquo;，沒取得 file lock 的 process 則會得到 IOError, 印出 &ldquo;can&rsquo;t immediately lock the file&rdquo; 後結束程式。</p>

<pre><code class="language-python">#!/usr/bin/env python
# -*- coding: utf-8 -*-
import fcntl
import time
f = open('/tmp/locktest', 'r')
try:
    fcntl.flock(f, fcntl.LOCK_EX | fcntl.LOCK_NB)
except IOError:
    print(&quot;can't immediately lock the file&quot;)
else:
    print(&quot;No error&quot;)
    time.sleep(10)
f.close()
</code></pre>

<p>先取得 file lock 的 process：</p>

<pre><code class="language-bash"># python test.py
No error
</code></pre>

<p>沒取得 file lock 的 process：</p>

<pre><code class="language-bash"># python test.py
can't immediately lock the file
</code></pre>

<p>離 Python System Programming 更近一步了!</p>

<p>Ref: <a href="http://stackoverflow.com/questions/9907616/python-fcntl-does-not-lock-as-expected">Python fcntl does not lock as expected</a></p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-09-22-setup-domain-controller-on-ubuntu-1404/">Setup Domain Controller on Ubuntu 14.04</a>
			<br>
			<small>
				2014-09-22
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>在ubuntu 14.04 上架設 Samba Domain Controller 的步驟：
1. 安裝 samba libpam-smbpass</p>

<pre><code>sudo apt-get install samba libpam-smbpass
</code></pre>

<p>samba 版本目前是4.1.6 (4.0以上的 Samba 才有提供 Domain Controller 的功能)</p>

<pre><code>samba -V
Version 4.1.6-Ubuntu
</code></pre>

<ol>
<li>使用 samba-tool 一步一步設定，這裡我規劃 samba domain 的網域為 mysamba.test.io
<code>
samba-tool domain provision --use-rfc2307 --interactive
</code></li>
</ol>

<p>設定成功，過程的設定記錄如下：</p>

<pre><code>vagrant@vagrant-ubuntu-trusty-64:~$ sudo samba-tool domain provision --use-rfc2307 --interactive                                                   
Realm: mysamba.test.io
 Domain [mysamba]: 
 Server Role (dc, member, standalone) [dc]: 
 DNS backend (SAMBA_INTERNAL, BIND9_FLATFILE, BIND9_DLZ, NONE) [SAMBA_INTERNAL]: 
 DNS forwarder IP address (write 'none' to disable forwarding) [192.168.1.253]: 192.168.1.253
Administrator password: 
Retype password: 
Looking up IPv4 addresses
More than one IPv4 address found. Using 192.168.1.2
Looking up IPv6 addresses
No IPv6 address will be assigned
Setting up secrets.ldb
Setting up the registry
Setting up the privileges database
Setting up idmap db
Setting up SAM db
Setting up sam.ldb partitions and settings
Setting up sam.ldb rootDSE
Pre-loading the Samba 4 and AD schema
Adding DomainDN: DC=mysamba,DC=test,DC=io
Adding configuration container
Setting up sam.ldb schema
Setting up sam.ldb configuration data
Setting up display specifiers
Modifying display specifiers
Adding users container
Modifying users container
Adding computers container
Modifying computers container
Setting up sam.ldb data
Setting up well known security principals
Setting up sam.ldb users and groups
Setting up self join
Adding DNS accounts
Creating CN=MicrosoftDNS,CN=System,DC=mysamba,DC=test,DC=io
Creating DomainDnsZones and ForestDnsZones partitions
Populating DomainDnsZones and ForestDnsZones partitions
Setting up sam.ldb rootDSE marking as synchronized
Fixing provision GUIDs
A Kerberos configuration suitable for Samba 4 has been generated at /var/lib/samba/private/krb5.conf
Setting up fake yp server settings
Once the above files are installed, your Samba4 server will be ready to use
Server Role:           active directory domain controller
Hostname:              vagrant-ubuntu-trusty-64
NetBIOS Domain:        MYSAMBA
DNS Domain:            mysamba.test.io
DOMAIN SID:            S-1-5-21-711469164-2329730621-2401598146
</code></pre>

<p>附註：在使用 samba-tool 的過程式如果有設定錯誤，想再進行一行 samba-tool 操作，會出現錯誤訊息，提示你必須把 /var/lib/samba/private/sam.ldb /etc/samba/smb.conf 刪除，讓 samba-tool 來重新建立</p>

<pre><code>sudo rm /var/lib/samba/private/sam.ldb
sudo rm /etc/samba/smb.conf
</code></pre>

<p>Ref: <a href="https://wiki.samba.org/index.php/Samba_AD_DC_HOWTO">Samba AD DC HOWTO</a></p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-09-20-compile-the-upstart/">編譯 Upstart 1.13.2</a>
			<br>
			<small>
				2014-09-20
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>編譯 Upstart 1.13.2：</p>

<pre><code>sudo apt-get install libnih-dbus-dev libjson-c-dev
cd upstart 1.13.2/
./configure
make
</code></pre>

<p>編譯完成後，會得到以下的執行檔，這樣就得到一組 userspace 上開關機所需要的 utility 了</p>

<pre><code>init/init
util/initctl
util/reboot
util/runlevel
shutdown
telinit
upstart-event-bridge
upstart--bridge
upstart-dbus-bridge
upstart-socket-bridge
upstart-local-bridge
</code></pre>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-09-19-interactive-map-of-linux-kernel/">Interactive map of Linux kernel</a>
			<br>
			<small>
				2014-09-19
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>博大精深的 Linux kernel</p>

<p><a href="http://www.makelinux.net/kernel_map/">Interactive map of Linux kernel</a>:
<img src="http://upload.wikimedia.org/wikipedia/commons/5/5b/Linux_kernel_map.png" alt="Interactive map of Linux kernel" /></p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-08-30-gnu-autotools-automatically-compiles/">GNU Autotools自動編譯</a>
			<br>
			<small>
				2014-08-30
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>在開發 Open Source 項目時，經常會遇到 Autotools。翻了一下網路文章，覺得這張圖給出不錯的表示。
<a href="http://www.cnblogs.com/crazyhack/archive/2011/12/17/2291410.html">瘋狂駭客的技術隨筆 - 使用GNU Autotools自動編譯項目</a></p>

<p><img src="http://images.cnblogs.com/cnblogs_com/crazyhack/201112/201112172255386655.png" alt="Autotool" /></p>

<blockquote>
<p>圖中橢圓形狀的就是gnu autotools里的主要工具了，包括１autoscan２aclocal３autoheader４automake５autoconf等.而方形形狀只有Makefile.am和configure.ac是需要我們寫的，别的方框里除了Makefile是最終的配置文件，其它都是中間文件。(Makefile文件是由６configure生成的)</p>
</blockquote>

<p>Ref: <a href="http://en.wikipedia.org/wiki/Autoconf">http://en.wikipedia.org/wiki/Autoconf</a></p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-08-26-comparing-two-git-branch-with-common-ancestor/">Comparing two Git Branch with common ancestor</a>
			<br>
			<small>
				2014-08-26
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>今天在c9s的 facebook 上看到這個，才發現有這種用法。</p>

<p><a href="http://stackoverflow.com/questions/9834689/comparing-two-branches-in-git">http://stackoverflow.com/questions/9834689/comparing-two-branches-in-git</a>
原來還有這種用法 two dots 跟three dots 是不一樣的</p>

<pre><code># produce the diff between the tips of the two branches.
git diff branch_1..branch_2
# use three dots instead of two to find the diff from their common ancestor
git diff branch_1...branch_2
</code></pre>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-08-14-wikipedia-donate/">資助維基百科</a>
			<br>
			<small>
				2014-08-14
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>以前捐過一次，那時捐贈金額只能以美金計價，用VISA金融卡捐了 $35 美元，換算台幣是1033元，手續費15元(約1.45%)。現在在 wikipedia 上的捐贈可以用台幣計價了，上周在Wikipedia 上一樣用VISA金融卡捐了台幣1000元，手續費是13元 (換算起來是1.3%)。</p>

<p>本來以為用台幣計價是不是可以省去一些手續費，不過看起來是差不多的。但平常 Wikipedia 惠我良多，這些錢付出的很值得。刷完卡以後會收到一封信，感謝捐贈者的付出(其實我才要好好感謝Wikimedia foundation的貢獻)。</p>

<blockquote>
<p>您好 辰翰,</p>

<p>感谢您将自己无价的学识在这里贡献给了全世界的每一个人。</p>

<p>我的名字是里拉•特雷梯科夫，现任维基百科基金会的执行董事。在过去的一年里，全靠捐赠者作出的贡献帮助我们将百科全书增加了287种语言，让全世界更容易使用。我们致力于让那些没有机会接受教育的人们得到我们的帮助。我们将知识带给像来自印度Solapur的阿克沙雅•里颜加。她自小成长在一个纺织业小镇，并以维基百科作为主要的学习工具。在这些处于书本资源匮乏却拥有手机因特网服务区域的学生们，维基百科不可少的。在阿克沙雅毕业于一个印度大学后，就来到了美国任职软件工程师。她十分感激维基百科，她认为自己有一半的知识都来自于此。</p>

<p>像这样的故事并不少见，我们团队任重道远，前途曲折，充满挑战。很多使用维基的人们在得知它是由非盈利组织和捐款下运作后，都十分震惊。每年，都会有恰好人数的捐款者帮助我们把知识得以带给全世界任何人。我再次感谢你们，让我们能完成这个任务。</p>

<p>我再次代表近五亿阅读维基百科的人们，上千维基编辑者和基金会的成员们，感谢你让我们得以使维基百科今年依旧上线而无广告。</p>

<p>感谢您，
里拉</p>

<p>里拉·特雷梯科夫
执行董事
维基媒体基金会
donate.wikimedia.org</p>

<p>特此证明：你于2014-08-06日做出NT$ 1000.00的捐款，捐款号CNTCT-6788186。</p>

<p>这封邮件可以证明您的捐款金额记录。对此捐款没有提供任何商品和服务。维基基金会符合美国501 &copy;(3)规定的非盈利的慈善机构，我们的地址是美国加州旧金山新蒙哥马利大厦149号3层。免税号：20-0049703</p>
</blockquote>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-08-08-taiwan-weather-imagery/">台灣天氣雲圖 cwb-radarmap</a>
			<br>
			<small>
				2014-08-08
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>最近做了一款簡單的 Web App <a href="http://swem.github.io/cwb-radarmap">cwb-radarmap</a></p>

<p>其實我想做這個是因為看到這篇文章   其實我覺得中央氣象局的資料不輸日本
只差在資料的開放性跟呈現程度  <a href="https://www.facebook.com/chihchun/posts/10152654161372915">https://www.facebook.com/chihchun/posts/10152654161372915</a></p>

<p>點開 <a href="http://swem.github.io/cwb-radarmap">cwb-radarmap</a> ，可以幫你定出自己的位置，並顯示15分鐘內的雷達回波圖。在快出門的時候點開看一下，可以簡單的判斷即時天氣。</p>

<p>附注：雖然雷達回波僅約略呈現空中雲雨系統含水量〈包括三態之水〉的分布情形，不能直接換算成地面降水量的多寡。但還是有一定的參考程度。<br />
(夏天就不一定了，因為午後雷陣雨常是長出雷雨胞所降下的大雨。但冬天來說，藉由觀察雲帶的走向，還滿能夠推測降雨的可能性。)</p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>


	<div class="panel panel-default">
	<div class="panel-header">
		<h3>
			<a href="https://swem.github.io/post/2014-08-01-get-google-api-key/">取得 Google API 金鑰</a>
			<br>
			<small>
				2014-08-01
			</small>
		</h3>
	</div>
	<div class="panel-body">
		<p>Google API 提供了很多好用的 API，可以用來存取Google 提供的資源(包含資料、運算資源等等)。之前貢獻了一個 patch 在 Hackfoldr 上，就是透過 YouTube Data API v3 去取得 Youtube 的影片相關資訊。要發佈使用Google API的專案時，就要記得先去取得一組 Google API 金鑰。步驟可參考Google的說明 (介面可能稍有不同，但差異應該不大)。</p>

<p><a href="https://developers.google.com/maps/documentation/javascript/tutorial?hl=zh-tw#api_key">取得 API 金鑰</a><br />
如何建立 API 金鑰：</p>

<ol>
<li>請前往 API 控制台 (位於 <a href="https://code.google.com/apis/console)，並登入您的">https://code.google.com/apis/console)，並登入您的</a> Google 帳戶。</li>
<li>按一下左選單中的 [Services] 連結。</li>
<li>啟用 [Google Maps API v3] 服務。</li>
<li>按一下左方選單中的 [API Access]。您可以從 [API Access] 頁面的 [Simple API Access] 區段取得 API 金鑰。Maps API 應用程式會使用 [Key for browser apps]。</li>
</ol>

<p>根據預設，金鑰可用於任何網站。我們強烈建議您將金鑰限制於使用在自己管理的網域中，以免遭未經授權的網站使用。只要您按一下金鑰的 [Edit allowed referrers&hellip;] 連結，即可指定允許使用 API 金鑰的網域。</p>

<p>Referrers 就是允許向Google API發出請求的網域，如果你要發佈到 example.com，那麼就在這個欄位填寫 example.com/*。</p>

<p>再依照自己的需求，在<a href="https://code.google.com/apis/console">API 控制台</a>打開相對應的API。以Hackfoldr來說，需要開啟 YouTube Data API v3 。</p>

<p>最後，把這組 API 金鑰配置到自已網站設定中。以Hackfoldr來說，就是填寫在 app/config.jsenv 中。這樣，網站應用程式就可以串接 Google API 來提供服務了。</p>

<p>註：Google API對每一個專案有流量上限。如果流量到達了就無法繼續使用，這時可以參考付費方案，來購買更多的使用量。</p>

	</div>
	<div class="panel-footer">
		
	</div>
</div>



<div class="text-center center-block">
	

<ul class="pagination">
    
    <li>
        <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li
    >
    <a href="/page/3/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
     
        
        
    
    
    <li
    ><a href="/">1</a></li>
    
    
    
    
    
     
        
        
    
    
    <li
    ><a href="/page/2/">2</a></li>
    
    
    
    
    
     
        
        
    
    
    <li
    ><a href="/page/3/">3</a></li>
    
    
    
    
    
     
        
        
    
    
    <li
    class="active"><a href="/page/4/">4</a></li>
    
    
    
    
    
     
        
        
    
    
    <li
    ><a href="/page/5/">5</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="disabled"><span aria-hidden="true">&hellip;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
     
        
        
    
    
    <li
    ><a href="/page/10/">10</a></li>
    
    
    <li
    >
    <a href="/page/5/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li>
        <a href="/page/10/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

</div>

						</div>
					</div>
				</div>
			</div>
		</div>
  </div>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
  
  
  <script src="https://swem.github.io//js/App.js"></script>
  
</body>
</html>
