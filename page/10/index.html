<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta property="og:title" content="ChenHan&#39;s blog">
    
    <meta property="og:type" content="website">
    
    <meta property="og:description" content="">
    <meta property="og:url" content="https://chenhan1218.github.io/">
    <meta property="og:site_name" content="ChenHan&#39;s blog">
    
    <meta name="generator" content="Hugo 0.40.1" />
    <title>ChenHan&#39;s blog &middot; ChenHan&#39;s blog</title>
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="https://chenhan1218.github.io/css/style.css">
    
    <link href="https://chenhan1218.github.io/index.xml" rel="alternate" type="application/rss+xml" title="ChenHan&#39;s blog" />
    
    
    <link rel="icon" href="https://chenhan1218.github.io/favicon.ico" />
    

    
    
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top visible-xs">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
				<a class="navbar-brand" href="https://chenhan1218.github.io/">Chen-Han (Stanley) Hsiao</a>
			
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				
				
					<li><a href="https://chenhan1218.github.io/about">About</a></li>
				
					<li><a href="https://chenhan1218.github.io/post">Post</a></li>
				
			</ul>
		</div>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div id="menu" class="hidden-xs col-sm-4 col-md-3">
	<div id="menu-content" class="vertical-align">
		
			<h1 class="text-center"><a href="https://chenhan1218.github.io/">Chen-Han (Stanley) Hsiao</a></h1>
		
		
		
			<small class="text-center center-block">Tech Blog</small>
		
		
		
			<img id="profile-pic" src="https://chenhan1218.github.io//img/profile.png" alt="My Picture" class="img-circle center-block">
		
		<div id="social" class="text-center">
			
				<a href="https://github.com/chenhan1218"><i class="fa fa-github fa-2x"></i></a>
			
				<a href="https://www.linkedin.com/in/chen-han-hsiao-2b486049"><i class="fa fa-linkedin fa-2x"></i></a>
			
				<a href="https://plus.google.com/u/0/115154486338673377998"><i class="fa fa-google-plus fa-2x"></i></a>
			

			
		</div>
		<div id="links" class="text-center">
			
			
				<a href="https://chenhan1218.github.io/about">About</a>
			
				<a href="https://chenhan1218.github.io/post">Post</a>
			
		</div>
	</div>
</div>

		<div id="content" class="col-xs-12 col-sm-8 col-md-9">
			<div class="row">
				<div id="post" class="col-sm-offset-1 col-sm-10 col-md-10 col-lg-8">

<header>
	
	
		<h1> </h1>
	
</header>


<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2013-04-24-npm-install/'> npm install</a> </h2>
    <div class="post-meta">2013-04-24</div>
  </header>
  <p>NPM (Node Packaged Modules) 是 Node.js 裡很好用的模組安裝工具。從 npm 1.0 開始，有兩個方式來安裝模組。</p>

<ol>
<li><p>全域安裝，通常會把模組安裝在 /usr/local/lib/node_modules 的位置。</p>

<pre><code class="language-bash">$ npm install -g express
</code></pre></li>

<li><p>專案資料夾內的安裝，</p>

<pre><code class="language-bash">$ npm install express
</code></pre></li>
</ol>

<p>如何決定要用什麼方式來安裝呢。Node.js 提供了以下的原則：</p>

<ol>
<li>如果你要安裝的模組是用在專案中，以 require(&lsquo;whatever&rsquo;) 的方式來引用。那麼就在專案的資料夾安裝</li>
<li>如果你安裝的模組是要在 shell 裡使用的，那麼就用全域安裝。</li>
</ol>

<p>不過，有些模組你既需要在專案中 require 它，也需要在 shell 中執行它所附加的小工具。像是常用的<a href="http://coffeescript.org/">Coffee-script</a>、<a href="http://expressjs.com/">Express</a>。
那該怎麼做比較好呢。我建議你在全域還有專案資料夾內各安裝一份，這樣子很簡單也容易維護。</p>

<p>P.S. 你可以用 npm -v 來確定自己的 npm 是否為1.0 以上的版本。</p>

<p>Ref:
<a href="http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/">npm 1.0: Global vs Local installation</a></p>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2013-04-23-code-school-hall-passes/'> Code School Hall Passes</a> </h2>
    <div class="post-meta">2013-04-23</div>
  </header>
  <p>Code School 現在可以啟用兩天完全免費的課程
<a href="http://www.codeschool.com/hall_passes/fdd59c145dca/claim_shared">Code School - Hall Pass</a></p>

<p>目前他們的商業模式是少部份課程免費，其餘課程要成為收費會員才能上課，1個月 25 美元。
大多是 Web development 相關，課程的品質很好，對初學者很好上手，有興趣的人可以試一試。</p>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2013-04-10-digitalocean/'> DigitalOcean 初體驗</a> </h2>
    <div class="post-meta">2013-04-10</div>
  </header>
  <p>前幾天剛好有虛擬機器的需要，所以上 <a href="https://www.digitalocean.com">DigitalOcean</a> 開了一台最便宜的來試試。</p>

<p>架設 Server 十分容易，方案選一下，信用卡開下去就有了。
設備：512MB Memory, 1 Core, 20GB SSD Disk, 1TB Transfer</p>

<p>我選在 New York 的 Data Center，從台灣連過去的 Latency 大約是230ms。差強人意，但以我的用途可接受。
使用12小時花了 $0.09 美元，實在是非常划算。</p>

<p>後來因為用不到了，所以把機器做了個 Snapshot，然後就把機器刪除了。
這樣就不會產生任何花費。等到以後需要再從 Snapshot 重新建一台 Server 回來用就好。</p>

<p>能夠以使用時數計費，還有價格相對於 <a href="http://www.linode.com/">Linode</a> 便宜，是我選擇 DigitalOcean 的原因。</p>

<p>Ref[1]: <a href="http://blog.gslin.org/archives/2013/02/13/3203/digitalocean-%E8%88%87-linode-%E7%9A%84%E6%AF%94%E8%BC%83/">DigitalOcean 與 Linode 的比較…</a></p>

<p>Ref[2]: <a href="http://jasonormand.com/2013/02/08/linode-vs-digitalocean-performance-benchmarks/">Linode vs DigitalOcean, performance benchmarks</a></p>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2013-03-27-boost-unit-test-framework-in-uva-online-judge/'> Boost Unit Test Framework in UVa Online Judge</a> </h2>
    <div class="post-meta">2013-03-27</div>
  </header>
  <p>利用 Boost Unit Test Framework，可以方便的進行單元測試。
而在 UVa Online Judge 的練習中，我們也可以導入 Boost Unit Test Framework 來對我們寫的 function 進行測試。
不過 UVa Online Judge 的編譯環境是不支援 Boost 的，但在編譯時，它會給一個特別的編譯參數 -DONLINE_JUDGE。
所以我們可以利用Uva 這個特有的編譯參數，在導入 Boost Unit Test Framework 時，又不會發生Compiler Error.</p>

<p>單元測試時：</p>

<pre><code class="language-bash">$ g++ 530.cpp -lboost_unit_test_framework
$ ./a.out 
Running 2 test cases...

*** No errors detected
</code></pre>

<p>以測資做為輸入的測試：</p>

<pre><code class="language-bash">$ g++ 530.cpp -DONLINE_JUDGE
$ ./a.out &lt;input.txt
6
252
13983816
</code></pre>

<p>程式碼：</p>

<pre><code class="language-cpp">//============================================================================
// Name        : 530.cpp
// Author      :
// Version     :
// Copyright   : copyright notice
//============================================================================

#include &lt;iostream&gt;
#include &lt;cstdlib&gt;
#include &lt;string&gt;
using namespace std;

#ifndef ONLINE_JUDGE
#define BOOST_TEST_DYN_LINK
#define BOOST_TEST_MODULE acm
#include &lt;boost/test/unit_test.hpp&gt;
#endif

long long combinations(long long int n, long long int k) {
	long long int ans = 1;
	if (k &gt; n - k) {
		k = n - k;
	}

	for (long long int idx = 1; idx &lt;= k; idx++) {
		ans *= (n - idx + 1);
		ans = ans / idx;
	}
	return ans;
}

#ifdef ONLINE_JUDGE
int main() {
	long long int n, k;
	while (cin &gt;&gt; n &gt;&gt; k) {
		if (n == 0 &amp;&amp; k == 0) {
			break;
		}

		cout &lt;&lt; combinations(n, k) &lt;&lt; endl;
	}
	return 0;
}
#else
BOOST_AUTO_TEST_SUITE(test)

BOOST_AUTO_TEST_CASE(testSmall) {
	BOOST_CHECK(combinations(0, 0) == 1);
	BOOST_CHECK(combinations(2, 2) == 1);
	BOOST_CHECK(combinations(2, 1) == 2);
	BOOST_CHECK(combinations(4, 2) == 6);
	BOOST_CHECK(combinations(6, 3) == 20);
	BOOST_CHECK(combinations(10, 5) == 252);
}

BOOST_AUTO_TEST_CASE(testLarge) {
	BOOST_CHECK(combinations(49, 6) == 13983816);
}

BOOST_AUTO_TEST_SUITE_END()
#endif
</code></pre>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2013-03-14-rip/'> RIP, Google Reader</a> </h2>
    <div class="post-meta">2013-03-14</div>
  </header>
  <p>今天 Google 宣布了 Google Reader 將於 2013/7/1 結束運作。</p>

<p>另一個 RSS 訂閱服務 Feedly 則馬上做出了回應，
Feedly 這項服務提供 Google Reader 使用者連結自己所訂閱的 RSS,
並以 Feedly 較為活潑清爽的版面來進行閱讀。
於 Feedly 上連結 Google Reader 的使用者，將可以在 2013/7/1 後，無痛延續閱讀自己訂閱的 RSS 來源.</p>

<p>就我先前的經驗來說，Feedly是個有趣的閱讀介面，
雖然我比較喜歡簡單的閱讀介面，所以還是維持使用 Google Reader,
不過既然現在 Feedly 提供這樣的服務(事實上提供Google Reader的連結訂閱，一直是Feedly的主力服務)，
我想就開始使用看看吧。</p>

<p>有興趣的人可以到: <a href="http://www.feedly.com/">Feedly</a></p>

<p>Ref:<br>
1. <a href="http://googleblog.blogspot.com/2013/03/a-second-spring-of-cleaning.html">A second spring of cleaning</a> <br>
2. <a href="http://googlereader.blogspot.com/2013/03/powering-down-google-reader.html">Powering Down Google Reader</a> <br>
3. <a href="http://blog.feedly.com/2013/03/14/google-reader/">Transitioning from Google Reader to feedly</a> <br></p>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2012-12-25-memory-blocks-are-possibly-lost-valgrind-example-again/'> Memory blocks are possibly lost (Valgrind example again!!)</a> </h2>
    <div class="post-meta">2012-12-25</div>
  </header>
  <p>今天讀到的文章 <a href="http://www.linuxprogrammingblog.com/using-valgrind-to-debug-memory-leaks">Using Valgrind to debug memory leaks</a>
{% codeblock lang:c %}
#include <stdio.h>
#include <string.h>
#include <ctype.h></p>

<p>char *lower;</p>

<p>char *to_lower (const char *str)
{
    char *l = strdup (str);
    char *c;</p>

<pre><code>for (c = l; *c; c++) {
    if (isupper(*c))
        *c = tolower(*c);
}

return l;
</code></pre>

<p>}</p>

<p>int main (int argc, char *argv[])
{
    lower = to_lower (argv[1]);</p>

<pre><code>while (*lower)
    putchar (*(lower++));
puts (&quot;&quot;);

return 0;
</code></pre>

<p>}
{% endcodeblock %}</p>

<p>輸出訊息
{% codeblock %}
==28578== 5 bytes in 1 blocks are possibly lost in loss record 1 of 1
==28578==    at 0x4025D2E: malloc (vg_replace_malloc.c:207)
==28578==    by 0x40D805F: strdup (in /lib/tls/i686/cmov/libc-2.8.90.so)
==28578==    by 0x8048504: to_lower (test2.c:9)
==28578==    by 0x804857F: main (test2.c:22)
{% endcodeblock %}</p>

<p>This time memory is possibly lost. Why it&rsquo;s not sure? Because at the program exit time we didn&rsquo;t completely lost the pointer to the allocated memory, we&rsquo;ve only advanced it to print the lower string in a funny way. It&rsquo;s theoretically possible that we have a variable, a counter that tells us how much we&rsquo;ve advanced, so we could compute the pointer to the memory to free it.</p>

<p>文章還提到了 Valgrind In practice. 很值得一看</p>

<p>At the beginning of using Valgrind to debug my programs I used to think this way: It&rsquo;s just an automatic, dumb tool that tracks memory allocations and can be wrong. I looked at the code and there can be no memory leak at this point, it&rsquo;s one of the cases when Valgrind is wrong.. But I was wrong! After years of using it I can see that 99,9% of it&rsquo;s messages are right but it&rsquo;s often hard to see it in the code.</p>

<p>One real world case was when I was writing a multi-threaded program that used libmysqlclient library and valgrind showed memory leaks in mysql_real_connect()/mysql_init(). It&rsquo;s clear from documentation that the memory allocated by the library when using those functions should be freed by mysql_close(). From the code it was clear that I do it properly: every created connection was closed. I even added a counter to the places when I create connection and destroy it and saw all connections were destroyed. I started to think that there is a memory leak in the libmysqlclient_r library (a thread-safe version) but when I separated the code (wrote a simple program that allocates conenctions and free them) Valgrind showed no errors. So there are no leaks in the library. If I had less believe in Valgrind I would give up at this moment, but I knew it&rsquo;s right. As I found out there is a special requirement by libmysqlclient_r, I just didn&rsquo;t read the documentation. If you are creating MYSQL objects in different threads the library automatically allocates per-thread global data, but to free them you must use mysql_thread_end(). It&rsquo;s not done</p>

</article>

<article class="post">
  <header>
    <h2><a href='https://chenhan1218.github.io/post/2012-12-17-valgrind-jian-cha-cheng-shi-ji-yi-ti-de-xiao-gong-ju/'> Valgrind - 檢查程式記憶體的小工具</a> </h2>
    <div class="post-meta">2012-12-17</div>
  </header>
  <p>Octopress 的第一篇文章，簡單介紹 Valgrind - 檢查程式記憶體的小工具</p>

<p>前陣子我對 project 進行 Debug
其中有一些 runtime error, 包含 memory leak</p>

<p>我使用 Valgrind 來檢查 Memory Leak</p>

<p>小範例，由 Valgrind 找出 test.cpp 第8行的 Bug  ( Invalid read )</p>

<p>{% codeblock lang:cpp %}
#include <iostream>
#include <vector>
using namespace std ;</p>

<p>int main()
{
    vector<double> array(1024);
    cout &lt;&lt; array[1024] &lt;&lt; endl ;
    return 0;
}
{% endcodeblock %}</p>

<p>$g++ -g test.cpp
$valgrind ./a.out</p>

<p>輸出訊息
{% codeblock %}
==9247== Memcheck, a memory error detector
==9247== Copyright &copy; 2002-2011, and GNU GPL&rsquo;d, by Julian Seward et al.
==9247== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==9247== Command: ./a.out
==9247==
==9247== Invalid read of size 8
==9247==    at 0x80487C4: main (test.cpp:8)
==9247==  Address 0x4336028 is 0 bytes after a block of size 8,192 alloc&rsquo;d
==9247==    at 0x402B9B4: operator new(unsigned int) (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==9247==    by 0x8048BD1: __gnu_cxx::new_allocator<double>::allocate(unsigned int, void const*) (new_allocator.h:92)
==9247==    by 0x8048B1D: std::_Vector_base<double, std::allocator<double> &gt;::_M_allocate(unsigned int) (in /home/stanleyhsiao/a.out)
==9247==    by 0x80489BC: std::_Vector_base<double, std::allocator<double> &gt;::_Vector_base(unsigned int, std::allocator<double> const&amp;) (stl_vector.h:123)
==9247==    by 0x80488D1: std::vector<double, std::allocator<double> &gt;::vector(unsigned int, double const&amp;, std::allocator<double> const&amp;) (stl_vector.h:265)
==9247==    by 0x80487A3: main (test.cpp:7)
==9247==
0
==9247==
==9247== HEAP SUMMARY:
==9247==     in use at exit: 0 bytes in 0 blocks
==9247==   total heap usage: 1 allocs, 1 frees, 8,192 bytes allocated
==9247==
==9247== All heap blocks were freed &ndash; no leaks are possible
==9247==
==9247== For counts of detected and suppressed errors, rerun with: -v
==9247== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
{% endcodeblock %}</p>

</article>


<div class="text-center center-block">
	

<ul class="pagination">
    
    <li>
        <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li
    >
    <a href="/page/9/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="disabled"><span aria-hidden="true">&hellip;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="/page/9/">9</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    class="active"><a href="/page/10/">10</a></li>
    
    
    <li
    class="disabled">
    <a href="" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li>
        <a href="/page/10/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

</div>

						</div>
					</div>
				</div>
			</div>
		</div>
  </div>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
  
  
  <script src="https://chenhan1218.github.io//js/App.js"></script>
  
</body>
</html>
